# ğŸ® WebRTC Real-time Spot the Difference

### WebRTC & Socket.IO ê¸°ë°˜ ì‹¤ì‹œê°„ í‹€ë¦°ê·¸ë¦¼ì°¾ê¸° ê²Œì„

> **P2P ì´ˆì €ì§€ì—°(Low Latency)** ì¥ì ì˜ **ì‹¤ì‹œê°„ ì›¹ ê²Œì„**

---

## ğŸ“– Overview

ì´ í”„ë¡œì íŠ¸ëŠ” **2ëª…ì˜ ì‚¬ìš©ìê°€ ê°™ì€ ë°©(Room)**ì— ì ‘ì†í•´  
**ë™ì¼í•œ ì´ë¯¸ì§€ì—ì„œ í‹€ë¦° ë¶€ë¶„ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì°¾ëŠ” ê²Œì„**ì…ë‹ˆë‹¤.

- WebRTC Data Channel â†’ **0msì— ê°€ê¹Œìš´ ì¦‰ê°ì ì¸ í´ë¦­ ê³µìœ **
- Socket.IO â†’ **ê²€ì¦ Â· ì ìˆ˜ Â· ê²Œì„ ìƒíƒœ ê´€ë¦¬**
- ì™„ë²½í•œ ë™ê¸°í™” & ë³´ì•ˆì„± í™•ë³´

---

## ì‹œì—° ì˜ìƒ

https://github.com/user-attachments/assets/fd48b3dc-3851-4e17-844d-ec2992e21fda

---

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥ (Features)

### âœ” ì‹¤ì‹œê°„ 1:1 ë§¤ì¹­

ë°© IDë¥¼ ì…ë ¥í•´ ì¦‰ì‹œ ì°¸ì—¬.

### âœ” Zero-Latency í´ë¦­ ê³µìœ  (WebRTC)

ìƒëŒ€ë°© í´ë¦­ ìœ„ì¹˜ê°€ **ê±°ì˜ ì§€ì—° ì—†ì´ ì¦‰ì‹œ ë Œë”ë§**ë¨.

### âœ” ì„œë²„ ê¸°ë°˜ ì ìˆ˜ ê²€ì¦ (Socket.IO)

ì •ë‹µ íŒì •, ì ìˆ˜ ê´€ë¦¬ ë“± í•µì‹¬ ë¡œì§ì€ ì„œë²„ì—ì„œ ì²˜ë¦¬ â†’ **ê³µì •ì„± ë³´ì¥**

### âœ” ìƒíƒœ ì™„ì „ ë™ê¸°í™”

ê²Œì„ ì‹œì‘/ì¢…ë£Œ, íƒ€ì´ë¨¸, ì •ë‹µ Lock, ì ìˆ˜ ë“± ëª¨ë“  íë¦„ì´ ì–‘ìª½ í™”ë©´ì—ì„œ ì¼ê´€ì„± ìœ ì§€.

---

## ğŸ— Architecture (í•˜ì´ë¸Œë¦¬ë“œ êµ¬ì¡°)

### ğŸ”€ í†µì‹  ê²½ë¡œë³„ ì—­í• 

| Path       | ê¸°ìˆ                       | ìš©ë„                     | íŠ¹ì§•                         |
| ---------- | ------------------------- | ------------------------ | ---------------------------- |
| **Path A** | **WebRTC (Data Channel)** | í´ë¦­ ì‹œê°, ë“œë¡œì‰        | ì„œë²„ë¥¼ ê±°ì¹˜ì§€ ì•ŠëŠ” ì´ˆì €ì§€ì—°  |
| **Path B** | **Socket.IO (WebSocket)** | ì •ë‹µ ê²€ì¦, ì ìˆ˜, ë£¸ ì •ë³´ | ë³´ì•ˆ Â· ì‹ ë¢°ì„± ë†’ì€ ì¤‘ì•™ ì²˜ë¦¬ |

---

## ğŸ”„ ë°ì´í„° íë¦„ë„

1. **Signaling (Socket.IO)**

   - SDP, ICE Candidate êµí™˜ â†’ P2P ì—°ê²° ìˆ˜ë¦½

2. **Action (í´ë¦­ ë°œìƒ)**

   - WebRTC â†’ ìƒëŒ€ë°©ì—ê²Œ ì¦‰ì‹œ ì¢Œí‘œ ì „ì†¡
   - Socket.IO â†’ ì„œë²„ì— â€œclaim(ì •ë‹µ ì‹œë„)â€ ìš”ì²­

3. **Validation (ì„œë²„ íŒì •)**
   - ì„œë²„ê°€ ì •ë‹µ í™•ì¸ í›„ `lock` ì´ë²¤íŠ¸ë¡œ ë‘ í´ë¼ì´ì–¸íŠ¸ì— ë°©ì†¡
   - ì ìˆ˜ í™•ì • ë° UI ì—…ë°ì´íŠ¸

---

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
ğŸ“¦ WEBRTC_PROJECT
 â”£ ğŸ“‚ server
 â”ƒ â”— ğŸ“œ server.js        # Socket.IO ì„œë²„, ë£¸/ì •ë‹µ/ì‹œê·¸ë„ë§ ê´€ë¦¬
 â”— ğŸ“‚ client
     â”£ ğŸ“‚ public/assets   # ê²Œì„ ì´ë¯¸ì§€ ë¦¬ì†ŒìŠ¤
     â”— ğŸ“‚ src
         â”£ ğŸ“‚ components
         â”ƒ â”£ ğŸ“œ SpotGame.jsx     # ê²Œì„ ë¡œì§ / í†µì‹  ì»¨íŠ¸ë¡¤ëŸ¬
         â”ƒ â”— ğŸ“œ ImageCanvas.jsx  # ìº”ë²„ìŠ¤ ë“œë¡œì‰ & ì¢Œí‘œ ê³„ì‚°
         â”£ ğŸ“‚ lib
         â”ƒ â”£ ğŸ“œ socket.js        # Socket.IO í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
         â”ƒ â”— ğŸ“œ rtc.js           # WebRTC ì„¤ì • & Data Channel ê´€ë¦¬
         â”— ğŸ“œ App.jsx            # í´ë¼ì´ì–¸íŠ¸ ì§„ì…ì 
```

---

## ğŸ›  ì„¤ì¹˜ ë° ì‹¤í–‰(Setup & Run)

### 1ï¸âƒ£ ì €ì¥ì†Œ í´ë¡ 

```bash
git clone https://github.com/your-username/your-repo-name.git
cd your-repo-name
```

---

### 2ï¸âƒ£ ì„œë²„ ì‹¤í–‰ (Server)

```bash
cd server
npm install
node server.js
```

ì¶œë ¥:

```
Server running on port 3001
```

---

### 3ï¸âƒ£ í´ë¼ì´ì–¸íŠ¸ ì‹¤í–‰ (Client)

ìƒˆ í„°ë¯¸ë„ì—ì„œ:

```bash
cd client
npm install
npm run dev
```

ì ‘ì† ì£¼ì†Œ:

```
http://localhost:5173
```

---

### 4ï¸âƒ£ ê²Œì„ í”Œë ˆì´ ë°©ë²•

1. ë¸Œë¼ìš°ì € íƒ­ 2ê°œ ì—´ê¸° (1ê°œëŠ” ì‹œí¬ë¦¿ ê¶Œì¥)
2. ë‘ íƒ­ ëª¨ë‘ `http://localhost:5173` ì ‘ì†
3. ê°™ì€ Room ID ì…ë ¥ â†’ Join
4. ì–‘ìª½ Ready â†’ ê²Œì„ ì‹œì‘ ğŸ®

---

## ğŸ› Troubleshooting (FAQ)

### â“ Ready ëˆŒë €ëŠ”ë° ë°˜ì‘ì´ ì—†ì–´ìš”

ì„œë²„ê°€ ì¬ì‹œì‘ë˜ë©´ ë£¸ ì •ë³´ ì´ˆê¸°í™”ë¨.  
â†’ **ë‘ ë¸Œë¼ìš°ì € ëª¨ë‘ ìƒˆë¡œê³ ì¹¨(F5) í›„ ì¬ì…ì¥**

---

### â“ í´ë¦­í–ˆëŠ”ë° ì ìˆ˜ ì•ˆ ì˜¬ë¼ìš”

`server.js`ì˜ LEVELS ë°ì´í„°ì™€  
`ImageCanvas.jsx`ì˜ í´ë¦­ ì¢Œí‘œ ê³„ì‚° ë¡œì§ ë¶ˆì¼ì¹˜ ê°€ëŠ¥ì„±.

â†’ **ì •ë‹µ ì˜ì—­ ì¢Œí‘œê°’ ì¼ì¹˜ ì—¬ë¶€ í™•ì¸**

---

# ğŸŒ Cloudflare Tunnelì„ ì´ìš©í•œ ì™¸ë¶€ ì ‘ì† ë°°í¬ (Development Sharing)

Cloudflare Tunnelì„ ì‚¬ìš©í•˜ë©´ ë¡œì»¬ì—ì„œ ê°œë°œ ì¤‘ì¸ ì„œë²„ë¥¼ ê°„ë‹¨í•˜ê²Œ ì™¸ë¶€ì—ì„œ ì ‘ì† ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
í…ŒìŠ¤í„°ë‚˜ ì¹œêµ¬ì—ê²Œ ì‹¤ì œ ê²Œì„ ë§í¬ë¥¼ ë³´ë‚´ ë°”ë¡œ í”Œë ˆì´ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> âš ï¸ Cloudflare Tunnelì€ ë¬´ë£Œì´ë©°,  
> **ì‚¬ìš©ìê°€ ìì‹ ì˜ Cloudflare ê³„ì •ì—ì„œ ì§ì ‘ ì‹¤í–‰í•´ì•¼ ì •ìƒ ë™ì‘**í•©ë‹ˆë‹¤.  
> ì•„ë˜ ì£¼ì†Œë“¤ì€ ì˜ˆì‹œì´ë©° ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” ê³ ìœ  ì£¼ì†Œê°€ ìƒì„±ë©ë‹ˆë‹¤.

---

## ğŸ”§ 1ë‹¨ê³„: ì„œë²„(Backend) ì™¸ë¶€ ê³µê°œ

```bash
cloudflared tunnel --url http://localhost:3001
```

ì¶œë ¥ ì˜ˆì‹œ:

```
https://aaaa-bbbb.trycloudflare.com
```

â¡ ì´ ì£¼ì†Œê°€ **ì™¸ë¶€ìš© ë°±ì—”ë“œ URL**ì…ë‹ˆë‹¤.

---

## ğŸ“ 2ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ í™˜ê²½ ë³€ìˆ˜ ìˆ˜ì •

`client/.env.development` ë˜ëŠ” `.env`ë¥¼ ë‹¤ìŒì²˜ëŸ¼ ë³€ê²½:

```env
# ê¸°ì¡´
# VITE_BACKEND_URL=http://localhost:3001

# Cloudflare Backend URLë¡œ ë³€ê²½
VITE_BACKEND_URL=https://aaaa-bbbb.trycloudflare.com
```

ìˆ˜ì • í›„ dev ì„œë²„ ì¬ì‹œì‘:

```bash
npm run dev
```

---

## ğŸŒ 3ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ(Frontend) ì™¸ë¶€ ê³µê°œ

```bash
cloudflared tunnel --url http://localhost:5173
```

ì¶œë ¥ ì˜ˆì‹œ:

```
https://cccc-dddd.trycloudflare.com
```

â¡ ì´ê²ƒì´ **ì‹¤ì œ ì¹œêµ¬ì—ê²Œ ë³´ë‚´ì¤„ ì ‘ì† ë§í¬**ì…ë‹ˆë‹¤.

---

## ğŸš€ ìµœì¢… ìš”ì•½

| ì‹¤í–‰ ìœ„ì¹˜          | ì—­í•                                                                 |
| ------------------ | ------------------------------------------------------------------- |
| **CMD ì°½ 1**       | `cloudflared tunnel --url http://localhost:3001` (ì„œë²„ ì™¸ë¶€ ê³µìœ )   |
| **CMD ì°½ 2**       | `cloudflared tunnel --url http://localhost:5173` (í”„ë¡ íŠ¸ ì™¸ë¶€ ê³µìœ ) |
| **VS Code í„°ë¯¸ë„** | `npm run dev` (React ê°œë°œ ì„œë²„)                                     |
| **ì™¸ë¶€ ì ‘ì† ì£¼ì†Œ** | â†’ `https://cccc-dddd.trycloudflare.com`                             |

---

## ğŸ“„ License

MIT License

---
